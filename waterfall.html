<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Waterfall Lines</title>

<style>
html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: transparent;
}

canvas {
  position: absolute;
  inset: 0;
  pointer-events: none;
}
</style>
</head>

<body>

<canvas id="water"></canvas>

<script>
const canvas = document.getElementById("water");
const ctx = canvas.getContext("2d", { alpha: true });

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* =========================
   VERTICAL WATERFALL COLUMN
========================= */
const LINE_COUNT = 120;
const COLUMN_WIDTH = Math.min(220, window.innerWidth * 0.18);
const CENTER_X = () => canvas.width / 2;

const lines = [];

for (let i = 0; i < LINE_COUNT; i++) {
  lines.push({
    x: (Math.random() - 0.5) * COLUMN_WIDTH,
    y: Math.random() * canvas.height,
    amp: 1 + Math.random() * 3,
    freq: 0.002 + Math.random() * 0.004,
    phase: Math.random() * Math.PI * 2,
    thickness: Math.random() < 0.9 ? 1 : 2,
    alpha: 0.06 + Math.random() * 0.18,
    speed: 0.6 + Math.random() * 1.2
  });
}

/* =========================
   DRAW LOOP
========================= */
let t = 0;

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.lineCap = "round";

  for (const line of lines) {
    ctx.beginPath();
    ctx.lineWidth = line.thickness;
    ctx.strokeStyle = `rgba(255,255,255,${line.alpha})`;

    let prevX = null;

    for (let y = -20; y <= canvas.height + 20; y += 12) {
      const x =
        CENTER_X() +
        line.x +
        Math.sin(y * line.freq + line.phase + t) * line.amp;

      if (prevX !== null && Math.abs(x - prevX) > 10) continue;

      if (y <= -20) ctx.moveTo(x, y);
      else ctx.lineTo(x, y);

      prevX = x;
    }

    ctx.stroke();

    /* gravity */
    line.y += line.speed;
    line.phase += 0.01;

    if (line.y > canvas.height + 40) {
      line.y = -40;
    }
  }

  t += 0.01;
  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
