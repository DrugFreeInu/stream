<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Crushed Green Grass</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#010302;
  overflow:hidden;
}
canvas{position:fixed; inset:0;}
</style>
</head>
<body>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

const layers = { back:[], mid:[], front:[] };
const COUNTS = { back:120, mid:160, front:180 };
let baseY;

function blade(layer){
  const depth = layer==="front" ? 1 : layer==="mid" ? 0.6 : 0.3;

  return {
    x: Math.random()*canvas.width,
    len: 90 + Math.random()*260,
    width: 0.8 + Math.random()*2.8,
    speed: 0.001 + Math.random()*0.003,
    hue: 75 + Math.random()*45,     // olive â†’ deep green
    sat: 18 + Math.random()*40,     // muted, dirty
    light: 4 + Math.random()*16,    // HARD CAP, no whites
    drift: Math.random()*0.01,
    depth,
    phase: Math.random()*Math.PI*2
  };
}

function reset(){
  for(const k in layers) layers[k].length = 0;
  baseY = canvas.height * 0.87;

  for(const k in COUNTS){
    for(let i=0;i<COUNTS[k];i++){
      layers[k].push(blade(k));
    }
  }
}
reset();
addEventListener("resize", reset);

function drawLayer(list){
  for(const b of list){
    b.phase += b.speed;
    b.hue += Math.sin(b.phase)*b.drift;

    const sway =
      Math.sin(b.phase + b.x*0.01) *
      (4 + 14*b.depth);

    const grad = ctx.createLinearGradient(
      b.x, baseY,
      b.x + sway, baseY - b.len
    );

    // NOTE: lightness NEVER increases upward
    grad.addColorStop(0,
      `hsla(${b.hue},${b.sat}%,${b.light}%,${0.65})`
    );
    grad.addColorStop(0.6,
      `hsla(${b.hue},${b.sat}%,${b.light+4}%,${0.35})`
    );
    grad.addColorStop(1,
      `hsla(${b.hue},${b.sat}%,${b.light+6}%,0)`
    );

    ctx.strokeStyle = grad;
    ctx.lineWidth = b.width;
    ctx.beginPath();
    ctx.moveTo(b.x, baseY);
    ctx.lineTo(b.x + sway, baseY - b.len);
    ctx.stroke();
  }
}

function draw(){
  // heavier fade to keep blacks dominant
  ctx.fillStyle = "rgba(1,3,2,0.35)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // IMPORTANT: no 'lighter' blending at all
  ctx.globalCompositeOperation = "source-over";
  drawLayer(layers.back);
  drawLayer(layers.mid);
  drawLayer(layers.front);

  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
